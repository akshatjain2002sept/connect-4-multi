{"id":"connect-4-multi-01r","title":"[backend] User game history endpoint","description":"## Agent\n@claude-backend\n\n## Context\nEndpoint to fetch paginated game history for current user.\nRef: Spec v6 - API Endpoints\n\n## Requirements\n- [ ] Implement `GET /api/users/me/games`:\n  - Return games where user is player1 or player2\n  - Include opponent info (username, rating)\n  - Order by createdAt descending (most recent first)\n  - Support pagination with limit and offset query params\n  - Default limit: 10, max: 50\n\n## Acceptance Criteria\n- [ ] Returns user's completed games\n- [ ] Pagination works correctly\n- [ ] Includes opponent info and game result\n- [ ] Shows rating deltas\n\n## Dependencies\n- Blocked by: connect-4-multi-rd1 (user endpoints)\n- Blocks: Frontend match history page\n\n## Contract\n```typescript\n// GET /api/users/me/games?limit=10\u0026offset=0\nResponse: {\n  games: Array\u003c{\n    id: string\n    publicId: string\n    status: GameStatus\n    result: GameResult | null\n    endedReason: EndReason | null\n    opponent: { id, username, rating }\n    myPlayer: 1 | 2\n    myRatingDelta: number | null\n    createdAt: string\n    completedAt: string | null\n  }\u003e\n  total: number\n  limit: number\n  offset: number\n}\n```\n\n## Files Likely Touched\n- packages/backend/src/routes/users.ts\n- packages/backend/src/services/game-history.service.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:48:08.679233063Z","created_by":"ubuntu","updated_at":"2025-12-29T00:57:14.108705889Z","closed_at":"2025-12-29T00:57:14.108710148Z"}
{"id":"connect-4-multi-16s","title":"[backend] Rematch endpoint (optimistic lock)","description":"## Agent\n@claude-backend\n\n## Context\nRematch system with race protection to prevent duplicate games.\nRef: Spec v6 - Rematch System section\n\n## Requirements\n- [ ] Implement `POST /api/games/:id/rematch`:\n  - Validate game is COMPLETED or ABANDONED\n  - If rematchGameId exists: return existing rematch\n  - If no rematchRequestedBy: set request, return 'requested'\n  - If same player requests again: return 'requested'\n  - If other player requests: accept and create new game\n- [ ] On accept:\n  - Create new game with swapped colors (P1\u003c-\u003eP2)\n  - Use fresh rating snapshots\n  - CRITICAL: Use updateMany with rematchGameId: null condition\n  - If race lost: delete orphan game, return existing rematch\n\n## Acceptance Criteria\n- [ ] Request/accept flow works\n- [ ] Colors swap between games\n- [ ] Fresh Elo snapshots used\n- [ ] No duplicate rematch games created\n- [ ] Race condition properly handled\n\n## Dependencies\n- Blocked by: connect-4-multi-9ps (game helpers), connect-4-multi-86f (game state)\n- Blocks: Frontend rematch button\n\n## Contract\n```typescript\n// POST /api/games/:id/rematch\nResponse:\n  | { status: 'requested' }\n  | { status: 'accepted', newGameId: string, newPublicId: string }\n\n// Error codes: GAME_NOT_FINISHED, NO_OPPONENT, NOT_IN_GAME\n```\n\n## Files Likely Touched\n- packages/backend/src/routes/games.ts\n- packages/backend/src/services/rematch.service.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:48:03.3556192Z","created_by":"ubuntu","updated_at":"2025-12-29T00:57:08.703639059Z","closed_at":"2025-12-29T00:57:08.703641393Z"}
{"id":"connect-4-multi-1cg","title":"[frontend] MatchmakingModal","description":"## Agent\n@claude-frontend\n\n## Context\nModal for random matchmaking queue with status updates.\nRef: Spec v6 - Matchmaking section\n\n## Requirements\n- [ ] Create MatchmakingModal component:\n  - Opens from home page \"Find Match\" button\n  - Calls POST /api/matchmaking/join on open\n  - Shows searching animation\n  - Polls GET /api/matchmaking/status every 2s\n  - Shows queue time\n- [ ] Handle match found:\n  - Navigate to game page with matched gameId\n  - Close modal\n- [ ] Add cancel button:\n  - Calls DELETE /api/matchmaking/leave\n  - Closes modal\n- [ ] Handle errors (already queued, has active game)\n\n## Acceptance Criteria\n- [ ] Modal opens and joins queue\n- [ ] Shows searching animation\n- [ ] Polls for match status\n- [ ] Cancel removes from queue\n- [ ] Navigates to game when matched\n\n## Dependencies\n- Blocked by: connect-4-multi-zh6 (home page), connect-4-multi-c2c (API client)\n- Blocks: Complete matchmaking flow\n\n## Files Likely Touched\n- packages/frontend/src/components/MatchmakingModal.tsx\n- packages/frontend/src/hooks/useMatchmaking.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:53:29.258840928Z","created_by":"ubuntu","updated_at":"2025-12-29T00:55:14.867237097Z","closed_at":"2025-12-29T00:55:14.867237097Z","close_reason":"Closed"}
{"id":"connect-4-multi-246","title":"[frontend] Login page (Google OAuth + Guest)","description":"## Agent\n@claude-frontend\n\n## Context\nLogin/landing page with authentication options.\nRef: Spec v6 - Authentication section, Guest Warning\n\n## Requirements\n- [ ] Create login page at /login route\n- [ ] Add \"Sign in with Google\" button\n- [ ] Add \"Play as Guest\" button\n- [ ] Display guest warning:\n  \"Guest accounts are stored in this browser only. \n   Clearing browser data will lose your account and history.\"\n- [ ] Call PUT /api/users/me after auth to upsert user\n- [ ] Redirect to home after successful login\n- [ ] Style with \"Digital Plastic\" aesthetic (nostalgic feel)\n\n## Acceptance Criteria\n- [ ] Google sign-in works\n- [ ] Guest sign-in works\n- [ ] User created in database after auth\n- [ ] Redirects to home on success\n- [ ] Guest warning displayed prominently\n- [ ] Visually polished\n\n## Dependencies\n- Blocked by: connect-4-multi-xxx (React scaffold), connect-4-multi-xxx (API client)\n- Blocks: All authenticated features\n\n## Files Likely Touched\n- packages/frontend/src/pages/LoginPage.tsx\n- packages/frontend/src/components/GoogleSignInButton.tsx\n- packages/frontend/src/components/GuestSignInButton.tsx","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:51:36.90288835Z","created_by":"ubuntu","updated_at":"2025-12-29T00:55:14.859774489Z","closed_at":"2025-12-29T00:55:14.859774489Z","close_reason":"Closed"}
{"id":"connect-4-multi-2jp","title":"[frontend] GameOverModal with rematch","description":"## Agent\n@claude-frontend\n\n## Context\nModal shown when game ends with result and rematch option.\nRef: Spec v6 - Rematch System section\n\n## Requirements\n- [ ] Create GameOverModal component:\n  - Show game result (Win/Lose/Draw)\n  - Show Elo change (+/- rating delta)\n  - Show opponent info\n- [ ] Add rematch functionality:\n  - \"Request Rematch\" button\n  - Show \"Waiting for opponent...\" when requested\n  - Show \"Opponent wants rematch!\" when they requested\n  - Navigate to new game when both accept\n- [ ] Add \"Return to Lobby\" button\n- [ ] Animate entrance/result display\n\n## Acceptance Criteria\n- [ ] Shows correct result and Elo change\n- [ ] Rematch request/accept flow works\n- [ ] Navigates to new game on rematch\n- [ ] Can return to lobby\n\n## Dependencies\n- Blocked by: connect-4-multi-czv (GamePage)\n- Blocks: Complete game cycle with rematch\n\n## Files Likely Touched\n- packages/frontend/src/components/GameOverModal.tsx\n- packages/frontend/src/hooks/useRematch.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:53:34.590069079Z","created_by":"ubuntu","updated_at":"2025-12-29T00:55:14.869118592Z","closed_at":"2025-12-29T00:55:14.869118592Z","close_reason":"Closed"}
{"id":"connect-4-multi-2uz","title":"[infra] Railway PostgreSQL setup + environment config","description":"## Agent\n@claude-infra\n\n## Context\nDatabase and environment setup for Railway deployment.\nRef: Spec v7 - Database Schema, Deployment Constraints\n\n## Requirements\n- [x] Create Railway project (or document setup steps)\n- [x] Provision PostgreSQL database on Railway\n- [x] Create `.env.example` with all required env vars:\n  - DATABASE_URL\n  - FIREBASE_PROJECT_ID\n  - FIREBASE_PRIVATE_KEY\n  - FIREBASE_CLIENT_EMAIL\n  - NODE_ENV\n  - PORT\n- [x] Document env var setup in README\n- [x] Set up local `.env` loading for development\n\n## Acceptance Criteria\n- [x] DATABASE_URL connects to Railway PostgreSQL\n- [x] Backend can read environment variables\n- [x] `.env.example` documents all required vars\n- [x] Local development works with `.env` file\n\n## Dependencies\n- Blocked by: connect-4-multi-ug0 (monorepo)\n- Blocks: Prisma migration, backend deployment\n\n## Files Likely Touched\n- .env.example\n- packages/backend/.env.example\n- README.md (env section)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:33:40.483232128Z","created_by":"ubuntu","updated_at":"2025-12-29T00:59:54.103201072Z","closed_at":"2025-12-29T01:15:00Z"}
{"id":"connect-4-multi-3px","title":"[backend] Express app skeleton + health endpoint","description":"## Agent\n@claude-backend\n\n## Context\nFoundation Express.js application with health check endpoint.\nRef: Spec v6 - API Endpoints\n\n## Requirements\n- [ ] Initialize Express.js app in packages/backend\n- [ ] Configure TypeScript compilation\n- [ ] Add CORS middleware\n- [ ] Add JSON body parser\n- [ ] Implement `GET /api/health` endpoint\n- [ ] Add error handling middleware\n- [ ] Configure dev server with hot reload (nodemon/tsx)\n- [ ] Add production build script\n\n## Acceptance Criteria\n- [ ] `pnpm --filter backend dev` starts server\n- [ ] `GET /api/health` returns 200 with status JSON\n- [ ] Server handles JSON requests\n- [ ] CORS configured for frontend origin\n\n## Dependencies\n- Blocked by: connect-4-multi-ug0 (monorepo)\n- Blocks: All other backend endpoints\n\n## Contract\n```typescript\n// GET /api/health\nResponse: { status: 'ok', timestamp: string }\n```\n\n## Files Likely Touched\n- packages/backend/src/index.ts\n- packages/backend/src/routes/health.ts\n- packages/backend/src/middleware/error.ts\n- packages/backend/tsconfig.json\n- packages/backend/package.json","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:44:39.116091282Z","created_by":"ubuntu","updated_at":"2025-12-29T00:56:17.020862028Z","closed_at":"2025-12-29T00:56:17.020864402Z"}
{"id":"connect-4-multi-581","title":"[backend] Firebase auth middleware","description":"## Agent\n@claude-backend\n\n## Context\nMiddleware to verify Firebase ID tokens and attach user info to requests.\nRef: Spec v6 - Authentication section\n\n## Requirements\n- [ ] Install firebase-admin SDK\n- [ ] Initialize Firebase Admin with service account\n- [ ] Create auth middleware that:\n  - Extracts Bearer token from Authorization header\n  - Verifies token with Firebase Admin\n  - Attaches decoded token to request (req.auth)\n  - Returns 401 for missing/invalid tokens\n- [ ] Apply to all routes except /api/health\n- [ ] Add TypeScript types for extended Request\n\n## Acceptance Criteria\n- [ ] Valid Firebase token passes through\n- [ ] Invalid/missing token returns 401 UNAUTHORIZED\n- [ ] Decoded token available as req.auth in handlers\n- [ ] Guest (anonymous) tokens work correctly\n\n## Dependencies\n- Blocked by: connect-4-multi-fxy (Express skeleton), connect-4-multi-df1 (Firebase setup)\n- Blocks: All authenticated endpoints\n\n## Contract\n```typescript\n// Extended Express Request\ninterface AuthRequest extends Request {\n  auth: {\n    uid: string          // Firebase UID\n    email?: string       // null for guests\n    isAnonymous: boolean\n  }\n}\n```\n\n## Files Likely Touched\n- packages/backend/src/middleware/auth.ts\n- packages/backend/src/lib/firebase.ts\n- packages/backend/src/types.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:44:44.443935028Z","created_by":"ubuntu","updated_at":"2025-12-29T00:56:25.463743996Z","closed_at":"2025-12-29T00:56:25.46374637Z"}
{"id":"connect-4-multi-5jg","title":"[frontend] Mobile responsive design","description":"## Agent\n@claude-frontend\n\n## Context\nEnsure the game works well on mobile devices.\nRef: Spec v6 - Goals\n\n## Requirements\n- [ ] Game board scales properly on small screens\n- [ ] Touch targets are appropriately sized (min 44px)\n- [ ] Column selection works with touch\n- [ ] All modals work on mobile\n- [ ] Navigation is mobile-friendly\n- [ ] Test on various screen sizes:\n  - Small phone (320px)\n  - Large phone (414px)\n  - Tablet (768px)\n  - Desktop (1024px+)\n\n## Acceptance Criteria\n- [ ] Playable on mobile phones\n- [ ] No horizontal scrolling\n- [ ] Touch interactions work\n- [ ] Modals are usable on small screens\n\n## Dependencies\n- Blocked by: Most frontend components\n- Blocks: None (polish)\n\n## Files Likely Touched\n- packages/frontend/src/styles/*.css\n- packages/frontend/tailwind.config.js\n- Various component files (responsive classes)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:54:13.51390427Z","created_by":"ubuntu","updated_at":"2025-12-29T01:02:52.547486465Z","closed_at":"2025-12-29T01:02:52.547486465Z","close_reason":"Mobile responsive design complete: touch-manipulation for buttons, min 44px touch targets, responsive text/padding (sm:/md: breakpoints), truncation for usernames, aspect-ratio scaling for game board, hidden column hover indicators on mobile. Build passing."}
{"id":"connect-4-multi-619","title":"[backend] Move endpoint (atomic terminal handling)","description":"## Agent\n@claude-backend\n\n## Context\nCore move endpoint with atomic handling for terminal moves (win/draw).\nRef: Spec v6 - Move Endpoint section (most critical backend logic)\n\n## Requirements\n- [ ] Implement `POST /api/games/:id/move`:\n  - Validate player is in game\n  - Check abandonment BEFORE turn validation (return USE_CLAIM_ABANDONED_ENDPOINT)\n  - Validate it's player's turn\n  - Validate column (0-6) and not full\n  - Apply move to board\n  - Check for win or draw\n- [ ] For terminal moves (win/draw):\n  - Single atomic updateMany with move + finalize + rating calculation\n  - Assert rating snapshots exist\n  - Calculate Elo deltas (zero-sum)\n  - Update user ratings in same transaction\n  - Update win/loss/draw counts\n- [ ] For non-terminal moves:\n  - updateMany with conditional where\n  - Switch currentTurn\n  - Update playerLastSeen\n\n## Acceptance Criteria\n- [ ] Moves apply correctly\n- [ ] Win detection triggers game end\n- [ ] Draw detection triggers game end\n- [ ] Ratings updated atomically on game end\n- [ ] NOT_YOUR_TURN returned when wrong player moves\n- [ ] Redirects to claim-abandoned when opponent timed out\n\n## Dependencies\n- Blocked by: connect-4-multi-9ps (game helpers), connect-4-multi-86f (game state)\n- Blocks: Frontend game play\n\n## Contract\n```typescript\n// POST /api/games/:id/move\nRequest: { column: number }  // 0-6\nResponse: {\n  status: 'move_applied' | 'game_ended'\n  reason?: 'CONNECT4' | 'BOARD_FULL'\n  game: Game\n  move: Move\n}\n\n// Error codes: NOT_YOUR_TURN, INVALID_COLUMN, COLUMN_FULL,\n//              GAME_NOT_ACTIVE, NOT_IN_GAME, USE_CLAIM_ABANDONED_ENDPOINT\n```\n\n## Files Likely Touched\n- packages/backend/src/routes/games.ts\n- packages/backend/src/services/move.service.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:46:59.14684673Z","created_by":"ubuntu","updated_at":"2025-12-29T00:56:52.461123359Z","closed_at":"2025-12-29T00:56:52.461125834Z"}
{"id":"connect-4-multi-61b","title":"[testing] Test infrastructure setup","description":"## Agent\n@codex-testing\n\n## Context\nSet up test infrastructure for both unit and integration testing.\nRef: Spec v6 - Implementation Phases (Phase 5: Hardening)\n\n## Requirements\n- [ ] Install testing dependencies:\n  - Jest (or Vitest)\n  - supertest for API testing\n  - @testing-library/react for frontend\n  - Test database utilities\n- [ ] Configure test scripts in package.json\n- [ ] Set up test database configuration (separate from dev)\n- [ ] Create test utilities:\n  - Database seeding helpers\n  - Auth token mocking\n  - API client test wrapper\n- [ ] Add CI configuration for running tests\n\n## Acceptance Criteria\n- [ ] `pnpm test` runs all tests\n- [ ] `pnpm test:unit` runs unit tests only\n- [ ] `pnpm test:integration` runs API tests\n- [ ] Tests use isolated test database\n- [ ] CI runs tests on PR\n\n## Dependencies\n- Blocked by: connect-4-multi-ug0 (monorepo), connect-4-multi-94b (Prisma)\n- Blocks: All test beads\n\n## Files Likely Touched\n- packages/backend/jest.config.js\n- packages/backend/src/test/setup.ts\n- packages/backend/src/test/utils.ts\n- packages/frontend/vitest.config.ts\n- .github/workflows/test.yml","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-28T23:55:14.694117666Z","created_by":"ubuntu","updated_at":"2025-12-28T23:55:14.694117666Z"}
{"id":"connect-4-multi-6ag","title":"[backend] Private game endpoints (create, join)","description":"## Agent\n@claude-backend\n\n## Context\nEndpoints for creating and joining private games with invite codes.\nRef: Spec v6 - Create Private Game, Join Private Game sections\n\n## Requirements\n- [ ] Implement `POST /api/games` - create private game:\n  - Check user has no active game\n  - Generate 6-char invite code (base32)\n  - Set player1LastSeen on create\n  - Return game with code\n- [ ] Implement `POST /api/games/join/:code` - join by code:\n  - Validate code format\n  - Check joiner has no active game\n  - Use updateMany with conditional where for race protection\n  - Randomly assign first turn\n  - Set rating snapshots (p1RatingBefore, p2RatingBefore)\n  - Set both playerLastSeen timestamps\n\n## Acceptance Criteria\n- [ ] Private game created with unique code\n- [ ] Cannot create game if already in one\n- [ ] Cannot join own game\n- [ ] Cannot join full/started game\n- [ ] Rating snapshots set when game becomes ACTIVE\n- [ ] Random first turn assignment works\n\n## Dependencies\n- Blocked by: connect-4-multi-xxx (game helpers), connect-4-multi-rd1 (user endpoints)\n- Blocks: Frontend game creation flow\n\n## Contract\n```typescript\n// POST /api/games\nRequest: {}  // empty, just creates\nResponse: {\n  id: string\n  publicId: string\n  code: string  // 6-char invite code\n  status: 'WAITING'\n  player1Id: string\n}\n\n// POST /api/games/join/:code\nResponse: {\n  id: string\n  publicId: string\n  status: 'ACTIVE'\n}\n\n// Error codes: HAS_ACTIVE_GAME, GAME_NOT_FOUND, GAME_ALREADY_STARTED, CANNOT_JOIN_OWN_GAME\n```\n\n## Files Likely Touched\n- packages/backend/src/routes/games.ts\n- packages/backend/src/services/game.service.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:45:55.967044774Z","created_by":"ubuntu","updated_at":"2025-12-29T00:56:41.665713838Z","closed_at":"2025-12-29T00:56:41.665716083Z"}
{"id":"connect-4-multi-72a","title":"[testing] E2E tests (full game flow)","description":"## Agent\n@codex-testing\n\n## Context\nEnd-to-end tests for complete user flows.\nRef: Spec v6 - Implementation Phases (Phase 5)\n\n## Requirements\n- [ ] Install Playwright or Cypress\n- [ ] Test login flow:\n  - Guest login works\n  - User created in database\n  - Redirects to home\n- [ ] Test private game flow:\n  - Create game, get code\n  - Join with code\n  - Play to completion\n  - See result\n- [ ] Test matchmaking flow:\n  - Two users queue\n  - Match created\n  - Play game\n- [ ] Test rematch flow:\n  - Request rematch\n  - Accept rematch\n  - New game starts with swapped colors\n- [ ] Test abandonment flow:\n  - Opponent times out\n  - Claim win button appears\n  - Claim works\n\n## Acceptance Criteria\n- [ ] Full user flows work end-to-end\n- [ ] Tests run in CI\n- [ ] Flaky tests minimized\n\n## Dependencies\n- Blocked by: Most frontend and backend beads\n- Blocks: Production readiness\n\n## Files Likely Touched\n- packages/e2e/playwright.config.ts\n- packages/e2e/tests/*.spec.ts","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-28T23:56:10.07127943Z","created_by":"ubuntu","updated_at":"2025-12-28T23:56:10.07127943Z"}
{"id":"connect-4-multi-7se","title":"[testing] API integration tests (matchmaking)","description":"## Agent\n@codex-testing\n\n## Context\nIntegration tests for matchmaking queue endpoints.\nRef: Spec v6 - Matchmaking section\n\n## Requirements\n- [ ] Test POST /api/matchmaking/join:\n  - Adds to queue when no match\n  - Matches immediately when opponent waiting\n  - Rejects if already queued\n  - Rejects if has active game\n- [ ] Test DELETE /api/matchmaking/leave:\n  - Removes from queue\n  - Returns not_queued if not in queue\n- [ ] Test GET /api/matchmaking/status:\n  - Returns queued status with time\n  - Returns matched when game created\n  - Returns not_queued when not in queue\n  - Updates lastHeartbeat\n- [ ] Test stale cleanup:\n  - Players removed after 30s without heartbeat\n\n## Acceptance Criteria\n- [ ] Queue operations work correctly\n- [ ] Matching logic tested\n- [ ] Stale cleanup verified\n\n## Dependencies\n- Blocked by: connect-4-multi-xxx (test infrastructure), connect-4-multi-b4s (matchmaking)\n- Blocks: Confidence in matchmaking\n\n## Files Likely Touched\n- packages/backend/src/routes/__tests__/matchmaking.test.ts","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-28T23:56:04.747343431Z","created_by":"ubuntu","updated_at":"2025-12-28T23:56:04.747343431Z"}
{"id":"connect-4-multi-86f","title":"[backend] Game state endpoints (get by id/publicId)","description":"## Agent\n@claude-backend\n\n## Context\nEndpoints for fetching game state, used for polling and initial load.\nRef: Spec v6 - API Endpoints, Real-Time Updates section\n\n## Requirements\n- [ ] Implement `GET /api/games/:id` - get by internal UUID\n- [ ] Implement `GET /api/games/by-public/:publicId` - get by public ID\n- [ ] Both endpoints should:\n  - Return full game state with player info\n  - Update playerLastSeen for requesting player (heartbeat)\n  - Include all fields needed for UI rendering\n- [ ] Handle game not found\n- [ ] Optionally include opponent username for display\n\n## Acceptance Criteria\n- [ ] Both endpoints return consistent game shape\n- [ ] Heartbeat updates playerLastSeen\n- [ ] Works for both players and returns same data\n- [ ] 404 for non-existent games\n\n## Dependencies\n- Blocked by: connect-4-multi-xxx (game creation)\n- Blocks: Frontend game page, polling\n\n## Contract\n```typescript\n// GET /api/games/:id OR /api/games/by-public/:publicId\nResponse: {\n  id: string\n  publicId: string\n  code: string | null\n  status: 'WAITING' | 'ACTIVE' | 'COMPLETED' | 'ABANDONED'\n  board: string  // 42-char\n  currentTurn: 1 | 2\n  moves: Move[]\n  player1: { id, username, rating }\n  player2: { id, username, rating } | null\n  result: 'P1_WIN' | 'P2_WIN' | 'DRAW' | null\n  endedReason: 'CONNECT4' | 'BOARD_FULL' | 'ABANDONED' | null\n  winnerId: string | null\n  p1RatingDelta: number | null\n  p2RatingDelta: number | null\n  player1LastSeen: string | null\n  player2LastSeen: string | null\n  rematchRequestedBy: 1 | 2 | null\n  rematchGameId: string | null\n  createdAt: string\n  completedAt: string | null\n}\n```\n\n## Files Likely Touched\n- packages/backend/src/routes/games.ts\n- packages/backend/src/services/game.service.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:46:01.328146603Z","created_by":"ubuntu","updated_at":"2025-12-29T00:56:47.059120714Z","closed_at":"2025-12-29T00:56:47.059122998Z"}
{"id":"connect-4-multi-86o","title":"[testing] API integration tests (games, moves)","description":"## Agent\n@codex-testing\n\n## Context\nIntegration tests for game and move endpoints.\nRef: Spec v6 - API Endpoints, Move Endpoint, Claim Abandoned, Rematch\n\n## Requirements\n- [ ] Test POST /api/games (create):\n  - Creates game with unique code\n  - Sets player1LastSeen\n  - Rejects if user has active game\n- [ ] Test POST /api/games/join/:code:\n  - Joins waiting game\n  - Sets rating snapshots\n  - Randomly assigns first turn\n  - Rejects invalid/used codes\n- [ ] Test GET /api/games/by-public/:publicId:\n  - Returns game state\n  - Updates playerLastSeen (heartbeat)\n- [ ] Test POST /api/games/:id/move:\n  - Applies valid move\n  - Rejects wrong turn\n  - Rejects full column\n  - Detects and handles win\n  - Detects and handles draw\n  - Updates ratings on terminal move\n- [ ] Test POST /api/games/:id/claim-abandoned:\n  - Awards win to claimer\n  - Rejects if opponent still active\n- [ ] Test POST /api/games/:id/rematch:\n  - Request/accept flow\n  - Colors swap\n  - New game created\n\n## Acceptance Criteria\n- [ ] Full game lifecycle testable\n- [ ] Edge cases covered\n- [ ] Race conditions handled\n\n## Dependencies\n- Blocked by: connect-4-multi-xxx (test infrastructure), connect-4-multi-619 (move endpoint)\n- Blocks: Confidence in game system\n\n## Files Likely Touched\n- packages/backend/src/routes/__tests__/games.test.ts\n- packages/backend/src/routes/__tests__/moves.test.ts\n- packages/backend/src/routes/__tests__/rematch.test.ts","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-28T23:55:59.395407354Z","created_by":"ubuntu","updated_at":"2025-12-28T23:55:59.395407354Z"}
{"id":"connect-4-multi-8kw","title":"[frontend] Animations + polish","description":"## Agent\n@claude-frontend\n\n## Context\nVisual polish to achieve the \"Digital Plastic\" nostalgic aesthetic.\nRef: Spec v6 - Goals (nostalgic \"Digital Plastic\" aesthetic)\n\n## Requirements\n- [ ] Piece drop animations (gravity feel)\n- [ ] Winning line highlight/glow animation\n- [ ] Page transitions\n- [ ] Loading states with skeleton/shimmer\n- [ ] Button hover/click feedback\n- [ ] Sound effects (optional):\n  - Piece drop sound\n  - Win/lose jingle\n- [ ] Consistent color scheme:\n  - Blue board\n  - Red and yellow pieces\n  - Glossy/plastic appearance\n- [ ] Typography that feels retro/nostalgic\n\n## Acceptance Criteria\n- [ ] Piece drops feel satisfying\n- [ ] Winning line is clearly highlighted\n- [ ] UI feels polished and responsive\n- [ ] Consistent visual theme throughout\n\n## Dependencies\n- Blocked by: connect-4-multi-nrp (GameBoard), connect-4-multi-czv (GamePage)\n- Blocks: None (polish)\n\n## Files Likely Touched\n- packages/frontend/src/styles/*.css\n- packages/frontend/src/components/*.tsx (animation additions)\n- packages/frontend/public/sounds/ (if adding audio)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:54:08.18469354Z","created_by":"ubuntu","updated_at":"2025-12-29T00:59:54.108024482Z","closed_at":"2025-12-29T00:59:54.108024482Z","close_reason":"Added animations: drop, bounce-in, pulse-glow, shimmer, wiggle, slide-up, fade-in, scale-in. Enhanced buttons, modals, ClaimWinButton with gradient and shadow effects. Build passing."}
{"id":"connect-4-multi-8qr","title":"[infra] Frontend deployment setup (Vercel/Railway static)","description":"## Agent\n@claude-infra\n\n## Context\nDeploy React frontend. Options: Vercel (recommended for React) or Railway static serving.\nRef: Spec v6 - Tech Stack\n\n## Requirements\n- [x] Configure build output for frontend package\n- [x] Set up deployment (Vercel or Railway)\n- [x] Configure environment variables for Firebase\n- [x] Set up API proxy or CORS for backend communication\n- [x] Configure production build scripts\n\n## Acceptance Criteria\n- [x] Frontend builds and deploys successfully\n- [x] Can communicate with backend API\n- [x] Firebase auth works in production\n- [x] Environment variables properly configured\n\n## Dependencies\n- Blocked by: connect-4-multi-ug0 (monorepo), connect-4-multi-df1 (Firebase)\n- Blocks: E2E testing in production\n\n## Files Likely Touched\n- packages/frontend/vite.config.ts (or similar)\n- vercel.json OR railway frontend config\n- packages/frontend/.env.production","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:43:35.899418026Z","created_by":"ubuntu","updated_at":"2025-12-29T01:02:52.539249774Z","closed_at":"2025-12-29T01:15:00Z"}
{"id":"connect-4-multi-94b","title":"[infra] Prisma schema + initial migration","description":"## Agent\n@claude-infra\n\n## Context\nDatabase schema setup using Prisma ORM. Critical foundation for all data operations.\nRef: Spec v7 - Database Schema section\n\n## Requirements\n- [x] Add Prisma as dependency in backend package\n- [x] Create `prisma/schema.prisma` with:\n  - User model (id, firebaseUid, email, username, isGuest, rating, wins/losses/draws, timestamps)\n  - Game model (id, publicId, code, player refs, board, currentTurn, status, moves, result, endedReason, winner, rating snapshots, rematch fields, heartbeats, timestamps)\n  - GameStatus enum (WAITING, ACTIVE, COMPLETED, ABANDONED)\n  - GameResult enum (P1_WIN, P2_WIN, DRAW)\n  - EndReason enum (CONNECT4, BOARD_FULL, ABANDONED)\n- [x] Add all indexes per spec (rating, createdAt, code, status, updatedAt, publicId)\n- [x] Configure JSON default with `dbgenerated(\"'[]'::jsonb\")` for moves\n- [x] Generate initial migration\n- [x] Add Prisma scripts to package.json (generate, migrate, studio)\n\n## Acceptance Criteria\n- [x] `pnpm prisma generate` succeeds\n- [x] `pnpm prisma migrate dev` creates tables\n- [x] `pnpm prisma studio` can view tables\n- [x] All indexes created per spec\n\n## Dependencies\n- Blocked by: connect-4-multi-2uz (Railway PostgreSQL)\n- Blocks: All backend data operations\n\n## Contract (Backend consumes)\n```prisma\nmodel User {\n  id          String   @id @default(uuid())\n  firebaseUid String   @unique\n  email       String?\n  username    String   @unique\n  isGuest     Boolean  @default(false)\n  rating      Int      @default(1000)\n  wins        Int      @default(0)\n  losses      Int      @default(0)\n  draws       Int      @default(0)\n  createdAt   DateTime @default(now())\n  updatedAt   DateTime @updatedAt\n}\n\nmodel Game {\n  id              String      @id @default(uuid())\n  publicId        String      @unique // 8-char base32\n  code            String?     @unique // 6-char for private games\n  player1Id       String\n  player2Id       String?\n  board           String      @default(\"000000000000000000000000000000000000000000\")\n  currentTurn     Int         @default(1)\n  status          GameStatus  @default(WAITING)\n  moves           Json        @default(dbgenerated(\"'[]'::jsonb\"))\n  result          GameResult?\n  endedReason     EndReason?\n  winnerId        String?\n  p1RatingBefore  Int?\n  p2RatingBefore  Int?\n  p1RatingDelta   Int?\n  p2RatingDelta   Int?\n  ratingAppliedAt DateTime?\n  rematchRequestedBy Int?\n  rematchGameId      String?\n  player1LastSeen DateTime?\n  player2LastSeen DateTime?\n  createdAt       DateTime    @default(now())\n  updatedAt       DateTime    @updatedAt\n  completedAt     DateTime?\n}\n```\n\n## Files Likely Touched\n- packages/backend/package.json\n- packages/backend/prisma/schema.prisma\n- packages/backend/prisma/migrations/","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:36:30.033209642Z","created_by":"ubuntu","updated_at":"2025-12-29T01:02:52.541527288Z","closed_at":"2025-12-29T01:15:00Z"}
{"id":"connect-4-multi-9ps","title":"[backend] Game helpers (publicId, board logic, Elo)","description":"## Agent\n@claude-backend\n\n## Context\nCore game logic helpers used across multiple endpoints.\nRef: Spec v6 - Helper Functions section\n\n## Requirements\n- [ ] Implement `generatePublicId()` - 8-char base32 ID\n- [ ] Implement `createGameWithPublicId()` - transaction-aware with retry\n- [ ] Implement board validation:\n  - `assertValidBoard(board)` - validate 42-char string\n  - `findDropRow(board, column)` - find where piece lands\n  - `applyMove(board, column, player)` - apply and return new board\n- [ ] Implement win detection:\n  - `checkWin(board, row, col, player)` - check 4 directions\n  - `isBoardFull(board)` - check for draw\n- [ ] Implement Elo calculation (zero-sum):\n  - `calculateEloChange(winnerRating, loserRating)`\n  - `calculateEloDraw(rating1, rating2)`\n- [ ] Implement `parseMoves(moves)` - safe JSON parsing\n- [ ] Implement `checkAbandonment(game, userId)` - 30s threshold\n\n## Acceptance Criteria\n- [ ] All helper functions have unit tests\n- [ ] Board logic correctly handles all edge cases\n- [ ] Elo is zero-sum (deltas sum to 0)\n- [ ] Win detection works in all 4 directions\n\n## Dependencies\n- Blocked by: connect-4-multi-ug0 (monorepo)\n- Blocks: Move endpoint, game creation\n\n## Contract\n```typescript\n// Public ID: 8-char base32 (no 0/O/1/I for readability)\nconst BASE32_CHARS = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789'\n\n// Board: 42-char string, '0' = empty, '1' = P1, '2' = P2\n// Index = row * 7 + column (row 0 = top)\n\n// Move result\ninterface Move {\n  moveNumber: number\n  column: number\n  row: number\n  player: 1 | 2\n  userId: string\n  ts: string // ISO timestamp\n}\n\n// Elo deltas (zero-sum)\n{ winnerDelta: number, loserDelta: number }  // loserDelta = -winnerDelta\n{ delta1: number, delta2: number }           // delta2 = -delta1\n```\n\n## Files Likely Touched\n- packages/backend/src/lib/game-logic.ts\n- packages/backend/src/lib/elo.ts\n- packages/backend/src/lib/public-id.ts\n- packages/shared/src/types.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:45:50.647772552Z","created_by":"ubuntu","updated_at":"2025-12-29T00:56:36.264577913Z","closed_at":"2025-12-29T00:56:36.264580698Z"}
{"id":"connect-4-multi-az4","title":"[frontend] ClaimWinButton component","description":"## Agent\n@claude-frontend\n\n## Context\nButton that appears when opponent abandons (30s timeout).\nRef: Spec v6 - Frontend: Claim Win Button section\n\n## Requirements\n- [ ] Create ClaimWinButton component:\n  - Only show when opponent's lastSeen \u003e 30 seconds ago\n  - Show pulsing/animated attention-grabbing style\n  - Text: \"Opponent Disconnected - Claim Win\"\n- [ ] On click:\n  - Call POST /api/games/:id/claim-abandoned\n  - Update game state with result\n  - Show success feedback\n- [ ] Handle errors gracefully\n\n## Acceptance Criteria\n- [ ] Button appears after 30s of opponent inactivity\n- [ ] Button is visually prominent (pulsing/animated)\n- [ ] Click claims the win\n- [ ] Game state updates after claim\n\n## Dependencies\n- Blocked by: connect-4-multi-czv (GamePage)\n- Blocks: Complete game flow with abandonment\n\n## Files Likely Touched\n- packages/frontend/src/components/ClaimWinButton.tsx","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:53:23.927327535Z","created_by":"ubuntu","updated_at":"2025-12-29T00:55:14.865875191Z","closed_at":"2025-12-29T00:55:14.865875191Z","close_reason":"Closed"}
{"id":"connect-4-multi-b4s","title":"[backend] Matchmaking queue (join/leave/status)","description":"## Agent\n@claude-backend\n\n## Context\nIn-memory matchmaking queue with mutex protection for thread safety.\nRef: Spec v6 - Matchmaking section\n\n## Requirements\n- [ ] Implement in-memory queue with Map\u003cuserId, QueueEntry\u003e\n- [ ] Add async-mutex for thread safety\n- [ ] Implement `POST /api/matchmaking/join`:\n  - Check not already queued\n  - Check no active game\n  - Clean stale entries (\u003e30s since lastHeartbeat)\n  - Try to match with first available player\n  - If matched: create game with rating snapshots, return matched status\n  - If not: add to queue, return queued status\n- [ ] Implement `DELETE /api/matchmaking/leave`:\n  - Remove from queue\n- [ ] Implement `GET /api/matchmaking/status`:\n  - Update lastHeartbeat\n  - Try to match if still queued\n  - Return current status\n- [ ] Set up 10s interval for stale cleanup\n\n## Acceptance Criteria\n- [ ] Players can join and leave queue\n- [ ] Matching creates ACTIVE game immediately\n- [ ] Stale players cleaned up after 30s\n- [ ] Thread-safe under concurrent access\n- [ ] First-come-first-served matching (FIFO)\n\n## Dependencies\n- Blocked by: connect-4-multi-9ps (game helpers), connect-4-multi-rd1 (user endpoints)\n- Blocks: Frontend matchmaking modal\n\n## Contract\n```typescript\n// POST /api/matchmaking/join\nResponse: \n  | { status: 'queued' }\n  | { status: 'matched', gameId: string, publicId: string }\n  | { status: 'already_queued' }\n  | { status: 'has_active_game', gameId: string }\n\n// DELETE /api/matchmaking/leave\nResponse: { status: 'left' | 'not_queued' }\n\n// GET /api/matchmaking/status\nResponse:\n  | { status: 'queued', queuedAt: string }\n  | { status: 'matched', gameId: string, publicId: string }\n  | { status: 'not_queued' }\n```\n\n## Files Likely Touched\n- packages/backend/src/routes/matchmaking.ts\n- packages/backend/src/services/matchmaking.service.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:47:09.809550192Z","created_by":"ubuntu","updated_at":"2025-12-29T00:57:03.302989321Z","closed_at":"2025-12-29T00:57:03.302991676Z"}
{"id":"connect-4-multi-bfl","title":"[backend] Cleanup jobs (stale WAITING/ACTIVE games)","description":"## Agent\n@claude-backend\n\n## Context\nBackground jobs to clean up stale games that were never completed.\nRef: Spec v6 - Cleanup Jobs section\n\n## Requirements\n- [ ] Implement stale WAITING cleanup (run every 5 min):\n  - Delete WAITING games where player1LastSeen \u003e 15 minutes ago\n  - Log count of deleted games\n- [ ] Implement stale ACTIVE cleanup (run hourly):\n  - Delete ACTIVE games where updatedAt \u003e 24 hours ago\n  - Only delete if ratingAppliedAt is null (not finalized)\n  - Log count of deleted games\n- [ ] Use setInterval or node-cron\n- [ ] Add logging for monitoring\n\n## Acceptance Criteria\n- [ ] Stale WAITING games cleaned up\n- [ ] Stale ACTIVE games cleaned up\n- [ ] Jobs run on schedule\n- [ ] Cleanup is logged\n\n## Dependencies\n- Blocked by: connect-4-multi-3px (Express skeleton), connect-4-multi-94b (Prisma)\n- Blocks: Production stability\n\n## Files Likely Touched\n- packages/backend/src/jobs/cleanup.ts\n- packages/backend/src/index.ts (job registration)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:48:14.016976751Z","created_by":"ubuntu","updated_at":"2025-12-29T00:57:19.54364689Z","closed_at":"2025-12-29T00:57:19.543649174Z"}
{"id":"connect-4-multi-c2c","title":"[frontend] API client + types","description":"## Agent\n@claude-frontend\n\n## Context\nType-safe API client for communicating with backend.\nRef: Spec v6 - API Endpoints, Contracts\n\n## Requirements\n- [ ] Create typed API client class/functions:\n  - Base fetch wrapper with auth token\n  - Error handling with typed error codes\n  - All endpoint methods matching backend contracts\n- [ ] Define all shared types:\n  - User, Game, Move\n  - GameStatus, GameResult, EndReason enums\n  - Request/Response types for each endpoint\n- [ ] Handle API errors gracefully\n- [ ] Add request/response logging in development\n\n## Acceptance Criteria\n- [ ] All backend endpoints have typed client methods\n- [ ] Auth token automatically attached\n- [ ] Errors parsed and typed correctly\n- [ ] Types match backend contracts\n\n## Dependencies\n- Blocked by: connect-4-multi-xxx (React scaffold)\n- Blocks: All frontend pages that call API\n\n## Contract\n```typescript\n// API Client interface\ninterface ApiClient {\n  // Users\n  upsertUser(username?: string): Promise\u003cUser\u003e\n  getMe(): Promise\u003cUser\u003e\n  getMyActiveGame(): Promise\u003c{ game: Game | null }\u003e\n  getMyGames(limit?: number, offset?: number): Promise\u003cGameHistoryResponse\u003e\n  \n  // Matchmaking\n  joinQueue(): Promise\u003cQueueResult\u003e\n  leaveQueue(): Promise\u003c{ status: string }\u003e\n  getQueueStatus(): Promise\u003cQueueStatus\u003e\n  \n  // Games\n  createGame(): Promise\u003cGame\u003e\n  joinGameByCode(code: string): Promise\u003cJoinResult\u003e\n  getGame(publicId: string): Promise\u003cGame\u003e\n  makeMove(gameId: string, column: number): Promise\u003cMoveResult\u003e\n  claimAbandoned(gameId: string): Promise\u003c{ game: Game }\u003e\n  requestRematch(gameId: string): Promise\u003cRematchResult\u003e\n}\n```\n\n## Files Likely Touched\n- packages/frontend/src/lib/api.ts\n- packages/frontend/src/types/index.ts\n- packages/shared/src/types.ts (shared types)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:49:23.198476105Z","created_by":"ubuntu","updated_at":"2025-12-29T00:55:14.858118462Z","closed_at":"2025-12-29T00:55:14.858118462Z","close_reason":"Closed"}
{"id":"connect-4-multi-c7p","title":"[spec] Connect 4 Multiplayer - Tracking","description":"## Overview\nWeb-based Connect 4 game with user authentication (Firebase), real-time multiplayer (polling v1), and Elo rating system. Players can queue for random matchmaking or create private games with friends. Target aesthetic: \"Digital Plastic\" (nostalgic, glossy).\n\n## Tech Stack\n- Frontend: React + Tailwind CSS + shadcn/ui\n- Backend: Express.js (Node.js) on Railway (single instance)\n- Database: PostgreSQL + Prisma ORM on Railway\n- Auth: Firebase Auth (Google OAuth + Guest)\n\n## Beads by Agent\n\n### Infrastructure (@claude-infra)\n- [ ] connect-4-multi-ug0 - Monorepo scaffolding with pnpm workspaces\n- [ ] connect-4-multi-2uz - Railway PostgreSQL setup + environment config\n- [ ] connect-4-multi-94b - Prisma schema + initial migration\n- [ ] connect-4-multi-ccv - Railway backend deployment (single instance)\n- [ ] connect-4-multi-df1 - Firebase project setup (Google OAuth + Anonymous auth)\n- [ ] connect-4-multi-8qr - Frontend deployment setup (Vercel/Railway static)\n\n### Backend (@claude-backend)\n- [ ] connect-4-multi-3px - Express app skeleton + health endpoint\n- [ ] connect-4-multi-581 - Firebase auth middleware\n- [ ] connect-4-multi-rd1 - User endpoints (GET/PUT /api/users/me)\n- [ ] connect-4-multi-9ps - Game helpers (publicId, board logic, Elo)\n- [ ] connect-4-multi-6ag - Private game endpoints (create, join)\n- [ ] connect-4-multi-86f - Game state endpoints (get by id/publicId)\n- [ ] connect-4-multi-619 - Move endpoint (atomic terminal handling)\n- [ ] connect-4-multi-mcd - Claim abandoned endpoint\n- [ ] connect-4-multi-b4s - Matchmaking queue (join/leave/status)\n- [ ] connect-4-multi-16s - Rematch endpoint (optimistic lock)\n- [ ] connect-4-multi-01r - User game history endpoint\n- [ ] connect-4-multi-bfl - Cleanup jobs (stale WAITING/ACTIVE games)\n\n### Frontend (@claude-frontend)\n- [ ] connect-4-multi-swk - React app scaffold + Firebase hook\n- [ ] connect-4-multi-c2c - API client + types\n- [ ] connect-4-multi-246 - Login page (Google OAuth + Guest)\n- [ ] connect-4-multi-zh6 - Home/lobby page\n- [ ] connect-4-multi-nrp - GameBoard component\n- [ ] connect-4-multi-czv - GamePage with polling\n- [ ] connect-4-multi-az4 - ClaimWinButton component\n- [ ] connect-4-multi-1cg - MatchmakingModal\n- [ ] connect-4-multi-2jp - GameOverModal with rematch\n- [ ] connect-4-multi-lyw - Match history page\n- [ ] connect-4-multi-8kw - Animations + polish\n- [ ] connect-4-multi-5jg - Mobile responsive design\n\n### Testing (@codex-testing)\n- [ ] connect-4-multi-61b - Test infrastructure setup\n- [ ] connect-4-multi-ie1 - Unit tests for game logic\n- [ ] connect-4-multi-pft - API integration tests (auth, users)\n- [ ] connect-4-multi-86o - API integration tests (games, moves)\n- [ ] connect-4-multi-7se - API integration tests (matchmaking)\n- [ ] connect-4-multi-72a - E2E tests (full game flow)\n\n## Dependency Graph\n\n```\n                    ┌─────────────────────┐\n                    │  connect-4-multi-ug0 │  Monorepo Scaffold\n                    │     (@claude-infra)  │\n                    └──────────┬──────────┘\n                               │\n           ┌───────────────────┼───────────────────┐\n           │                   │                   │\n           ▼                   ▼                   ▼\n┌──────────────────┐ ┌──────────────────┐ ┌──────────────────┐\n│ connect-4-multi- │ │ connect-4-multi- │ │ connect-4-multi- │\n│ 2uz (PostgreSQL) │ │ df1 (Firebase)   │ │ 3px (Express)    │\n│   @claude-infra  │ │   @claude-infra  │ │  @claude-backend │\n└────────┬─────────┘ └────────┬─────────┘ └────────┬─────────┘\n         │                    │                    │\n         ▼                    │                    │\n┌──────────────────┐          │                    │\n│ connect-4-multi- │          │                    │\n│ 94b (Prisma)     │          │                    │\n│   @claude-infra  │          │                    │\n└────────┬─────────┘          │                    │\n         │                    │                    │\n         └────────────────────┼────────────────────┘\n                              │\n                              ▼\n                    ┌──────────────────┐\n                    │ connect-4-multi- │\n                    │ 581 (Auth MW)    │\n                    │  @claude-backend │\n                    └────────┬─────────┘\n                             │\n         ┌───────────────────┼───────────────────┐\n         │                   │                   │\n         ▼                   ▼                   ▼\n┌──────────────────┐ ┌──────────────────┐ ┌──────────────────┐\n│ connect-4-multi- │ │ connect-4-multi- │ │ connect-4-multi- │\n│ rd1 (User EP)    │ │ 9ps (Helpers)    │ │ swk (React)      │\n│  @claude-backend │ │  @claude-backend │ │ @claude-frontend │\n└────────┬─────────┘ └────────┬─────────┘ └────────┬─────────┘\n         │                    │                    │\n         │                    ▼                    ▼\n         │           ┌──────────────────┐ ┌──────────────────┐\n         │           │ connect-4-multi- │ │ connect-4-multi- │\n         │           │ 6ag (Game Create)│ │ c2c (API Client) │\n         │           │  @claude-backend │ │ @claude-frontend │\n         │           └────────┬─────────┘ └────────┬─────────┘\n         │                    │                    │\n         │                    ▼                    ▼\n         │           ┌──────────────────┐ ┌──────────────────┐\n         │           │ connect-4-multi- │ │ connect-4-multi- │\n         │           │ 86f (Game State) │ │ 246 (Login Page) │\n         │           │  @claude-backend │ │ @claude-frontend │\n         │           └────────┬─────────┘ └────────┬─────────┘\n         │                    │                    │\n         │     ┌──────────────┼──────────────┐     │\n         │     │              │              │     │\n         │     ▼              ▼              ▼     ▼\n         │ ┌────────┐   ┌────────┐   ┌────────┐ ┌────────┐\n         │ │  619   │   │  mcd   │   │  b4s   │ │  zh6   │\n         │ │ (Move) │   │(Claim) │   │(Queue) │ │ (Home) │\n         │ └────┬───┘   └────────┘   └────┬───┘ └────┬───┘\n         │      │                         │          │\n         │      └─────────────────────────┼──────────┤\n         │                                │          │\n         ▼                                ▼          ▼\n  ┌──────────────┐                 ┌──────────┐ ┌──────────┐\n  │  01r (Hist)  │                 │   1cg    │ │   nrp    │\n  │ @cl-backend  │                 │ (Match)  │ │ (Board)  │\n  └──────────────┘                 └──────────┘ └────┬─────┘\n                                                     │\n                                                     ▼\n                                              ┌──────────────┐\n                                              │  czv (Game)  │\n                                              │  @cl-front   │\n                                              └──────┬───────┘\n                                                     │\n                       ┌─────────────────────────────┼─────────────────────┐\n                       │                             │                     │\n                       ▼                             ▼                     ▼\n                ┌──────────────┐             ┌──────────────┐      ┌──────────────┐\n                │  az4 (Claim) │             │  2jp (Rematch)│      │  16s (Rematch)│\n                │  @cl-front   │             │  @cl-front   │      │  @cl-backend  │\n                └──────────────┘             └──────────────┘      └──────────────┘\n\nTesting (parallel after respective backend/frontend):\nconnect-4-multi-61b → connect-4-multi-ie1, pft, 86o, 7se → connect-4-multi-72a\n\nPolish (after core features):\nconnect-4-multi-lyw (History), connect-4-multi-8kw (Animations), connect-4-multi-5jg (Mobile)\n\nDeployment (after core features):\nconnect-4-multi-ccv (Backend deploy), connect-4-multi-8qr (Frontend deploy)\n\nCleanup:\nconnect-4-multi-bfl (Cleanup jobs)\n```\n\n## Recommended Execution Order\n\n### Phase 1: Foundation (Parallel)\n1. connect-4-multi-ug0 (Monorepo) - FIRST, blocks everything\n2. Then in parallel:\n   - connect-4-multi-2uz → connect-4-multi-94b (Database)\n   - connect-4-multi-df1 (Firebase)\n   - connect-4-multi-3px (Express skeleton)\n\n### Phase 2: Auth Layer\n3. connect-4-multi-581 (Auth middleware)\n4. In parallel:\n   - connect-4-multi-rd1 (User endpoints)\n   - connect-4-multi-swk (React scaffold)\n\n### Phase 3: Core Game (Backend first, Frontend parallel)\n5. connect-4-multi-9ps (Game helpers) - Frontend can work on UI while this builds\n6. In parallel:\n   - Backend: connect-4-multi-6ag → connect-4-multi-86f → connect-4-multi-619 → connect-4-multi-mcd\n   - Frontend: connect-4-multi-c2c → connect-4-multi-246 → connect-4-multi-zh6 → connect-4-multi-nrp → connect-4-multi-czv\n\n### Phase 4: Features\n7. In parallel:\n   - connect-4-multi-b4s (Matchmaking queue)\n   - connect-4-multi-1cg (Matchmaking UI)\n   - connect-4-multi-az4 (Claim win button)\n8. connect-4-multi-16s + connect-4-multi-2jp (Rematch)\n\n### Phase 5: Testing (Parallel with Phase 4)\n9. connect-4-multi-61b (Test infra)\n10. In parallel: connect-4-multi-ie1, pft, 86o, 7se\n11. connect-4-multi-72a (E2E)\n\n### Phase 6: Polish \u0026 Deploy\n12. In parallel:\n    - connect-4-multi-01r (History endpoint)\n    - connect-4-multi-lyw (History page)\n    - connect-4-multi-8kw (Animations)\n    - connect-4-multi-5jg (Mobile)\n13. connect-4-multi-bfl (Cleanup jobs)\n14. connect-4-multi-ccv + connect-4-multi-8qr (Deploy)\n\n## Key Contracts\n\n### User Model\n```typescript\ninterface User {\n  id: string\n  username: string\n  isGuest: boolean\n  rating: number\n  wins: number\n  losses: number\n  draws: number\n}\n```\n\n### Game Model\n```typescript\ninterface Game {\n  id: string\n  publicId: string  // 8-char base32\n  code: string | null  // 6-char for private\n  status: 'WAITING' | 'ACTIVE' | 'COMPLETED' | 'ABANDONED'\n  board: string  // 42-char, '0'=empty, '1'=P1, '2'=P2\n  currentTurn: 1 | 2\n  moves: Move[]\n  player1: User\n  player2: User | null\n  result: 'P1_WIN' | 'P2_WIN' | 'DRAW' | null\n  // ... rating fields, timestamps\n}\n```\n\n### Move\n```typescript\ninterface Move {\n  moveNumber: number\n  column: number\n  row: number\n  player: 1 | 2\n  userId: string\n  ts: string  // ISO timestamp\n}\n```\n\n## Notes\n- Backend must be single instance (in-memory matchmaking queue)\n- Rating snapshots captured when game becomes ACTIVE\n- Elo is zero-sum (deltas always sum to 0)\n- Abandonment: 30s timeout, dedicated claim endpoint\n- Rematch: colors swap, fresh rating snapshots","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-28T23:58:48.506672869Z","created_by":"ubuntu","updated_at":"2025-12-28T23:58:48.506672869Z"}
{"id":"connect-4-multi-ccv","title":"[infra] Railway backend deployment (single instance)","description":"## Agent\n@claude-infra\n\n## Context\nDeploy Express backend to Railway with critical constraint: single instance required for in-memory matchmaking queue.\nRef: Spec v7 - Deployment Constraints\n\n## Requirements\n- [x] Create `railway.json` or `railway.toml` config\n- [x] Configure build command for backend\n- [x] Configure start command\n- [x] CRITICAL: Disable autoscaling - lock instance count to 1\n- [x] Configure health check endpoint /api/health\n- [x] Set up environment variables in Railway dashboard\n- [x] Document deployment process in README\n\n## Acceptance Criteria\n- [x] Backend deploys to Railway\n- [x] Health check passes\n- [x] Instance count locked to 1 (verified in Railway dashboard)\n- [x] DATABASE_URL correctly injected\n- [x] All env vars configured\n\n## Dependencies\n- Blocked by: connect-4-multi-ug0 (monorepo), connect-4-multi-2uz (Railway PostgreSQL)\n- Blocks: Production testing\n\n## Files Likely Touched\n- railway.json OR railway.toml\n- packages/backend/Dockerfile (if needed)\n- README.md (deployment section)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:36:57.800435292Z","created_by":"ubuntu","updated_at":"2025-12-29T01:02:52.542869847Z","closed_at":"2025-12-29T01:15:00Z"}
{"id":"connect-4-multi-czv","title":"[frontend] GamePage with polling","description":"## Agent\n@claude-frontend\n\n## Context\nMain game page that displays the board and handles real-time updates via polling.\nRef: Spec v6 - Real-Time Updates (Polling) section\n\n## Requirements\n- [ ] Create game page at /game/:publicId route\n- [ ] Fetch game state on mount\n- [ ] Set up 2-second polling interval for updates\n- [ ] Show different UI states:\n  - WAITING: Show invite code, waiting for opponent\n  - ACTIVE: Show board, current turn, make moves\n  - COMPLETED/ABANDONED: Show result, rematch option\n- [ ] Handle move submission:\n  - Call API with column\n  - Update local state optimistically\n  - Handle errors (NOT_YOUR_TURN, COLUMN_FULL)\n- [ ] Show player info (names, ratings, Elo delta after game)\n- [ ] Clean up polling on unmount\n\n## Acceptance Criteria\n- [ ] Game state loads and displays\n- [ ] Polling updates game every 2s\n- [ ] Moves work correctly\n- [ ] Shows waiting state with code\n- [ ] Shows game result when finished\n- [ ] No memory leaks from polling\n\n## Dependencies\n- Blocked by: connect-4-multi-xxx (GameBoard), connect-4-multi-c2c (API client)\n- Blocks: Full game flow\n\n## Files Likely Touched\n- packages/frontend/src/pages/GamePage.tsx\n- packages/frontend/src/hooks/useGamePolling.ts\n- packages/frontend/src/components/GameStatus.tsx\n- packages/frontend/src/components/PlayerInfo.tsx","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:52:39.206569666Z","created_by":"ubuntu","updated_at":"2025-12-29T00:55:14.863904443Z","closed_at":"2025-12-29T00:55:14.863904443Z","close_reason":"Closed"}
{"id":"connect-4-multi-df1","title":"[infra] Firebase project setup (Google OAuth + Anonymous auth)","description":"## Agent\n@claude-infra\n\n## Context\nAuthentication infrastructure using Firebase Auth. Supports Google OAuth for registered users and anonymous auth for guests.\nRef: Spec v7 - Authentication section, Guest Username Generation\n\n## Requirements\n- [x] Create Firebase project (or document setup steps)\n- [x] Enable Google OAuth provider\n- [x] Enable Anonymous authentication provider\n- [x] Generate service account credentials for backend\n- [x] Document Firebase console setup in README\n- [x] Add Firebase SDK config for frontend\n- [x] Create `.env.example` entries for Firebase config\n\n## Acceptance Criteria\n- [x] Google OAuth sign-in works from frontend\n- [x] Anonymous sign-in works from frontend\n- [x] Backend can verify Firebase ID tokens\n- [x] Service account credentials accessible to backend\n\n## Dependencies\n- Blocked by: connect-4-multi-ug0 (monorepo)\n- Blocks: Auth middleware, login page\n\n## Files Likely Touched\n- .env.example (Firebase vars)\n- packages/frontend/src/lib/firebase.ts (config)\n- README.md (Firebase setup section)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:37:12.504605339Z","created_by":"ubuntu","updated_at":"2025-12-29T01:02:52.54414307Z","closed_at":"2025-12-29T01:15:00Z"}
{"id":"connect-4-multi-ie1","title":"[testing] Unit tests for game logic","description":"## Agent\n@codex-testing\n\n## Context\nUnit tests for core game logic functions.\nRef: Spec v6 - Helper Functions section\n\n## Requirements\n- [ ] Test board validation:\n  - Valid 42-char boards pass\n  - Invalid length throws\n  - Invalid characters throw\n- [ ] Test findDropRow:\n  - Returns bottom row for empty column\n  - Returns correct row for partially filled\n  - Returns null for full column\n- [ ] Test applyMove:\n  - Correctly places piece\n  - Validates board before and after\n- [ ] Test checkWin:\n  - Horizontal 4-in-a-row\n  - Vertical 4-in-a-row\n  - Diagonal (both directions)\n  - Edge cases (board edges)\n  - No false positives for 3-in-a-row\n- [ ] Test isBoardFull:\n  - Empty board returns false\n  - Full board returns true\n- [ ] Test Elo calculations:\n  - Zero-sum (deltas always sum to 0)\n  - Higher rated player gains less for win\n  - Draw moves ratings toward each other\n\n## Acceptance Criteria\n- [ ] All game logic functions have test coverage\n- [ ] Edge cases covered\n- [ ] Tests are readable and maintainable\n\n## Dependencies\n- Blocked by: connect-4-multi-xxx (test infrastructure), connect-4-multi-9ps (game helpers)\n- Blocks: Confidence in game logic\n\n## Files Likely Touched\n- packages/backend/src/lib/__tests__/game-logic.test.ts\n- packages/backend/src/lib/__tests__/elo.test.ts","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-28T23:55:20.033156714Z","created_by":"ubuntu","updated_at":"2025-12-28T23:55:20.033156714Z"}
{"id":"connect-4-multi-lyw","title":"[frontend] Match history page","description":"## Agent\n@claude-frontend\n\n## Context\nPage to view past games and statistics.\nRef: Spec v6 - API Endpoints (GET /api/users/me/games)\n\n## Requirements\n- [ ] Create match history page at /history route\n- [ ] Fetch paginated game history from API\n- [ ] Display each game:\n  - Opponent username\n  - Result (Win/Loss/Draw)\n  - Elo change\n  - Date played\n  - Game duration (if tracked)\n- [ ] Add pagination controls (load more or pages)\n- [ ] Link each game to view replay (future) or navigate to game page\n- [ ] Show stats summary at top\n\n## Acceptance Criteria\n- [ ] Shows list of past games\n- [ ] Pagination works\n- [ ] Results displayed correctly\n- [ ] Can navigate back to lobby\n\n## Dependencies\n- Blocked by: connect-4-multi-zh6 (home page), connect-4-multi-c2c (API client)\n- Blocks: None (polish feature)\n\n## Files Likely Touched\n- packages/frontend/src/pages/HistoryPage.tsx\n- packages/frontend/src/components/GameHistoryItem.tsx","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:54:02.858810108Z","created_by":"ubuntu","updated_at":"2025-12-29T00:55:14.870426161Z","closed_at":"2025-12-29T00:55:14.870426161Z","close_reason":"Closed"}
{"id":"connect-4-multi-mcd","title":"[backend] Claim abandoned endpoint","description":"## Agent\n@claude-backend\n\n## Context\nDedicated endpoint for claiming victory when opponent abandons (30s timeout).\nRef: Spec v6 - Claim Abandoned Endpoint section\n\n## Requirements\n- [ ] Implement `POST /api/games/:id/claim-abandoned`:\n  - Validate player is in game\n  - Verify opponent's lastSeen \u003e 30 seconds ago\n  - Calculate Elo as if claiming player won\n  - Atomic updateMany to finalize game as ABANDONED\n  - Update user ratings and win/loss counts\n  - Handle race condition (if already finalized, return current state)\n\n## Acceptance Criteria\n- [ ] Returns OPPONENT_NOT_ABANDONED if opponent still active\n- [ ] Correctly awards win to claiming player\n- [ ] Elo calculated and applied atomically\n- [ ] Idempotent (safe to call multiple times)\n\n## Dependencies\n- Blocked by: connect-4-multi-9ps (game helpers), connect-4-multi-86f (game state)\n- Blocks: Frontend claim win button\n\n## Contract\n```typescript\n// POST /api/games/:id/claim-abandoned\nRequest: {}  // empty\nResponse: { game: Game }\n\n// Error codes: OPPONENT_NOT_ABANDONED, GAME_NOT_ACTIVE, NOT_IN_GAME\n```\n\n## Files Likely Touched\n- packages/backend/src/routes/games.ts\n- packages/backend/src/services/abandon.service.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:47:04.464099375Z","created_by":"ubuntu","updated_at":"2025-12-29T00:56:57.896543085Z","closed_at":"2025-12-29T00:56:57.896545681Z"}
{"id":"connect-4-multi-nrp","title":"[frontend] GameBoard component","description":"## Agent\n@claude-frontend\n\n## Context\nInteractive Connect 4 game board component.\nRef: Spec v6 - Overview (Digital Plastic aesthetic)\n\n## Requirements\n- [ ] Create 7x6 game board grid\n- [ ] Render pieces from board string (42 chars)\n- [ ] Show column hover indicators\n- [ ] Animate piece drops\n- [ ] Highlight winning 4-in-a-row when game ends\n- [ ] Show whose turn it is\n- [ ] Disable interaction when not player's turn\n- [ ] Disable interaction when game is over\n- [ ] Call onMove callback when column clicked\n- [ ] Style with \"Digital Plastic\" aesthetic:\n  - Glossy appearance\n  - Red and yellow pieces\n  - Blue board with circular holes\n\n## Acceptance Criteria\n- [ ] Board renders correctly from string\n- [ ] Pieces drop with animation\n- [ ] Hover states work\n- [ ] Winning line highlighted\n- [ ] Click triggers move callback\n- [ ] Visually polished and nostalgic feel\n\n## Dependencies\n- Blocked by: connect-4-multi-swk (React scaffold)\n- Blocks: Game page\n\n## Files Likely Touched\n- packages/frontend/src/components/GameBoard.tsx\n- packages/frontend/src/components/GamePiece.tsx\n- packages/frontend/src/components/ColumnSelector.tsx\n- packages/frontend/src/styles/game-board.css","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:52:33.87905094Z","created_by":"ubuntu","updated_at":"2025-12-29T00:55:14.862474745Z","closed_at":"2025-12-29T00:55:14.862474745Z","close_reason":"Closed"}
{"id":"connect-4-multi-pft","title":"[testing] API integration tests (auth, users)","description":"## Agent\n@codex-testing\n\n## Context\nIntegration tests for authentication and user endpoints.\nRef: Spec v6 - API Endpoints\n\n## Requirements\n- [ ] Test auth middleware:\n  - Valid token passes through\n  - Missing token returns 401\n  - Invalid token returns 401\n  - Anonymous (guest) token works\n- [ ] Test PUT /api/users/me:\n  - Creates new user on first call\n  - Returns existing user on subsequent calls\n  - Guest users get generated username\n  - Google users can set username\n- [ ] Test GET /api/users/me:\n  - Returns current user profile\n  - Includes rating and stats\n- [ ] Test GET /api/users/me/active-game:\n  - Returns null when no active game\n  - Returns game when in WAITING or ACTIVE\n\n## Acceptance Criteria\n- [ ] All auth flows tested\n- [ ] All user endpoints tested\n- [ ] Error cases covered\n\n## Dependencies\n- Blocked by: connect-4-multi-xxx (test infrastructure), connect-4-multi-rd1 (user endpoints)\n- Blocks: Confidence in auth system\n\n## Files Likely Touched\n- packages/backend/src/routes/__tests__/auth.test.ts\n- packages/backend/src/routes/__tests__/users.test.ts","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-28T23:55:25.364992016Z","created_by":"ubuntu","updated_at":"2025-12-28T23:55:25.364992016Z"}
{"id":"connect-4-multi-rd1","title":"[backend] User endpoints (GET/PUT /api/users/me)","description":"## Agent\n@claude-backend\n\n## Context\nUser profile endpoints for creating/updating and fetching current user.\nRef: Spec v6 - API Endpoints, Authentication section\n\n## Requirements\n- [ ] Implement `PUT /api/users/me`:\n  - Upsert user by firebaseUid\n  - For guests: generate random username (Adjective+Noun+Number)\n  - For Google users: use provided username or generate one\n  - Set isGuest flag based on auth type\n- [ ] Implement `GET /api/users/me`:\n  - Return current user profile with stats\n  - Include rating, wins, losses, draws\n- [ ] Implement `GET /api/users/me/active-game`:\n  - Return user's current WAITING or ACTIVE game if any\n- [ ] Handle username uniqueness with retry\n\n## Acceptance Criteria\n- [ ] New user created on first PUT\n- [ ] Existing user returned on subsequent PUTs\n- [ ] GET returns full profile with stats\n- [ ] Guest usernames are randomly generated\n- [ ] Active game endpoint works correctly\n\n## Dependencies\n- Blocked by: connect-4-multi-xxx (auth middleware), connect-4-multi-94b (Prisma schema)\n- Blocks: Frontend login flow, game creation\n\n## Contract\n```typescript\n// PUT /api/users/me\nRequest: { username?: string }  // optional for Google users\nResponse: User\n\n// GET /api/users/me  \nResponse: User\n\n// GET /api/users/me/active-game\nResponse: { game: Game | null }\n\ninterface User {\n  id: string\n  username: string\n  isGuest: boolean\n  rating: number\n  wins: number\n  losses: number\n  draws: number\n}\n```\n\n## Files Likely Touched\n- packages/backend/src/routes/users.ts\n- packages/backend/src/services/user.service.ts\n- packages/backend/src/lib/username-generator.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:44:49.790097762Z","created_by":"ubuntu","updated_at":"2025-12-29T00:56:30.858356722Z","closed_at":"2025-12-29T00:56:30.858359217Z"}
{"id":"connect-4-multi-swk","title":"[frontend] React app scaffold + Firebase hook","description":"## Agent\n@claude-frontend\n\n## Context\nFoundation React app with Firebase authentication hook.\nRef: Spec v6 - Tech Stack, Authentication\n\n## Requirements\n- [ ] Initialize React app with Vite in packages/frontend\n- [ ] Configure Tailwind CSS\n- [ ] Install and configure shadcn/ui\n- [ ] Initialize Firebase client SDK\n- [ ] Create useAuth hook:\n  - Manage Firebase auth state\n  - Provide signInWithGoogle\n  - Provide signInAnonymously (guest)\n  - Provide signOut\n  - Provide getIdToken for API calls\n- [ ] Set up React Router\n- [ ] Create AuthContext provider\n- [ ] Add protected route wrapper\n\n## Acceptance Criteria\n- [ ] `pnpm --filter frontend dev` starts dev server\n- [ ] Tailwind classes work\n- [ ] shadcn/ui components render\n- [ ] useAuth hook tracks auth state\n- [ ] Can get Firebase ID token for API calls\n\n## Dependencies\n- Blocked by: connect-4-multi-ug0 (monorepo), connect-4-multi-df1 (Firebase setup)\n- Blocks: All frontend pages\n\n## Files Likely Touched\n- packages/frontend/src/App.tsx\n- packages/frontend/src/lib/firebase.ts\n- packages/frontend/src/hooks/useAuth.ts\n- packages/frontend/src/contexts/AuthContext.tsx\n- packages/frontend/src/components/ProtectedRoute.tsx\n- packages/frontend/tailwind.config.js\n- packages/frontend/vite.config.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:49:17.859580601Z","created_by":"ubuntu","updated_at":"2025-12-29T00:55:14.855605201Z","closed_at":"2025-12-29T00:55:14.855605201Z","close_reason":"Closed"}
{"id":"connect-4-multi-ug0","title":"[infra] Monorepo scaffolding with pnpm workspaces","description":"## Agent\n@claude-infra\n\n## Context\nFoundation for the entire project. Sets up the monorepo structure that all other work depends on.\nRef: Spec v7 - Tech Stack, Implementation Phase 1\n\n## Requirements\n- [ ] Initialize pnpm workspace with `pnpm-workspace.yaml`\n- [ ] Create `packages/frontend` directory (React app placeholder)\n- [ ] Create `packages/backend` directory (Express app placeholder)\n- [ ] Create `packages/shared` directory (shared types/utils)\n- [ ] Set up root `package.json` with workspace scripts\n- [ ] Add `.nvmrc` with Node 20.x\n- [ ] Add root `.gitignore` (node_modules, .env, dist, etc.)\n- [ ] Add root `tsconfig.json` with path aliases\n\n## Acceptance Criteria\n- [ ] `pnpm install` works from root\n- [ ] `pnpm --filter frontend dev` is wired (can be placeholder)\n- [ ] `pnpm --filter backend dev` is wired (can be placeholder)\n- [ ] TypeScript configured for all packages\n\n## Dependencies\n- Blocked by: None (first bead)\n- Blocks: All other beads\n\n## Files Likely Touched\n- pnpm-workspace.yaml\n- package.json\n- tsconfig.json\n- .gitignore\n- .nvmrc\n- packages/frontend/package.json\n- packages/backend/package.json\n- packages/shared/package.json","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:33:17.568122488Z","created_by":"ubuntu","updated_at":"2025-12-29T00:48:35.401577958Z","closed_at":"2025-12-29T00:48:35.401580723Z"}
{"id":"connect-4-multi-zh6","title":"[frontend] Home/lobby page","description":"## Agent\n@claude-frontend\n\n## Context\nMain lobby page after login with game options and user stats.\nRef: Spec v6 - Overview\n\n## Requirements\n- [ ] Create home page at / route (protected)\n- [ ] Display current user info:\n  - Username\n  - Rating\n  - Win/Loss/Draw record\n- [ ] Add \"Find Match\" button (opens matchmaking modal)\n- [ ] Add \"Create Private Game\" button\n- [ ] Add \"Join Private Game\" button (with code input)\n- [ ] Add link to match history\n- [ ] Check for active game on load and redirect if found\n- [ ] Style with \"Digital Plastic\" aesthetic\n\n## Acceptance Criteria\n- [ ] Shows user stats\n- [ ] Can start matchmaking\n- [ ] Can create private game\n- [ ] Can join game by code\n- [ ] Redirects to active game if exists\n\n## Dependencies\n- Blocked by: connect-4-multi-246 (login page), connect-4-multi-c2c (API client)\n- Blocks: Game flow\n\n## Files Likely Touched\n- packages/frontend/src/pages/HomePage.tsx\n- packages/frontend/src/components/UserStats.tsx\n- packages/frontend/src/components/JoinGameDialog.tsx","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:52:28.556460332Z","created_by":"ubuntu","updated_at":"2025-12-29T00:55:14.861113891Z","closed_at":"2025-12-29T00:55:14.861113891Z","close_reason":"Closed"}
